#### 第一章 命名

- 名为万物之始，万物始于无名，道生一，一生二，二生三，三生万物. ——《道德经》

### 3.6.1 重要性
- 在程序员的工作中，大部分的时间都在阅读和理解代码，好的命名能够让代码的概念清晰，增加代码的表达力。好的命名是我们写出好代码的基础.
- 此外，`Martin Fowler`也表示过，他最喜欢的一句谚语是：“在计算机科学中有两件难事：缓存失效和命名。
- 代码即文档，可读性好的代码应该有一定的`自明性`，也就是不借助注释和文档，代码本身就能显性化地表达开发者的意图.

### 3.6.2 具体命名
- 变量名应该是`名词`，能够正确地描述业务，有表达力.
    
```java
int pageSize = 10;
// 这样做还有一个好处，即代码的`可搜索性`，在代码中查找 pageSize 很容易，但是想找到 10 就很麻烦了.
```
- 函数命名要具体，空泛的命名没有意义。函数的命名要体现做什么，而不是怎么做。
    - 假如我们将雇员信息存储在一个栈中，现在要从栈中获取最近存储的一个雇员信息，那么`getLatestEmployee()`就比`popRecord()`要好，因为栈数据结构是底层实现细节，命名应该提升抽象层次、体现业务语义。
- 类是面向对象中最重要的概念之一，是一组数据和操作的封装。对于一个应用系统，我们可以将类分为两大类：实体类和辅助类。
    - 实体类承载了核心业务数据和核心业务逻辑，其命名要充分体现`业务语义`，并在团队内达成共识，如Customer、Bank和Employee等。
    - 辅助类是辅佐实体类一起完成业务逻辑的，其命名要能够通过后缀来体现功能。例如：
        - 用来为 Customer 做控制路由的控制类 CustomerController
        - 提供 Customer 服务的服务类 CustomerService
        - 获取数据存储的仓储类 CustomerRepository
    - 对于辅助类，尽量不要用 Helper、Util 之类的后缀，因为其含义太过笼统，容易破坏`SRP`（单一职责原则）。
- 包（Package）代表了一组有关系的类的集合，起到`分类组合`和`命名空间`的作用。
- 这里说的模块（Module）主要是指Maven中的Module，相对于包来说，模块的粒度更大，通常一个模块中包含了多个包。

### 3.6.3 要点
- 保持一致性.
    - 保持命名的一致性，可以提高代码的可读性，从而简化复杂度。
- 每个概念对应一个词，并且一以贯之。例如:
    - fetch、retrieve、get、find 和 query 都可以表示查询的意思，如果不加约定地给多个类中的同种查询方法命名，你怎么记得是哪个类中的哪个方法呢？
    - 同样，在一段代码中，同时存在 manager、controller 和 handler，会令人感到困惑。

        CRUD 操作 | 方法名约定
        ---|---
        新增| create
        添加 | add
        删除 | remove
        修改 | update
        查询（单个结果）| get
        查询（多个结果）| list
        分页查询 | page
        统计 | count
   
- 遵守`对仗词`的命名规则有助于保持一致性，从而提高代码的可读性。
    - add / remove
    - increment / decrement
    - open / close
    - begin / end
    - inset / delete
    - show / hide
    - create / destory
    - lock / unlock
    - source / target
    - first / last
    - min / max
    - start / stop
    - get / set
    - next / previous
    - up / down
    - old / new


- 后置限定词
    - 很多程序中会有表示计算结果的变量，例如总额、平均值、最大值等。如果你要用类似Total、Sum、Average、Max、Min这样的限定词来修改某个命名，那么记住把限定词加到名字的`最后`，并在项目中贯彻执行，保持命名风格的一致性。
    - 这种方法有很多优点。首先，变量名中最重要的部分，即为这一变量赋予`主要含义的部分`应位于最前面，这样可以突出显示，并会被首先阅读到。
    - 如果贯彻限定词后置的原则，我们就能收获一组非常优雅、具有对称性的变量命名，例如:
        - revenueTotal（总收入）
        - expenseTotal（总支出）
        - revenueAverage（平均收入）
        - expenseAverage（平均支出）
- 统一业务语言（Confluence）
- 统一技术语言（技术栈）
- 自明的代码
    - 所谓`自明性`，就是在不借助其他辅助手段的情况下，代码本身就能向读者清晰地传达自身的含义。
- 小心注释
    - 如果注释是为了**阐述代码背后的意图**，那么这个注释是有用的；如果注释是为了复述代码功能，那么就要小心了，这样的注释往往意味着“坏味道”
        - 在Martin Fowler的《重构：改善既有代码的设计》一书中，注释就是“坏味道”之一），是为了弥补我们代码表达能力的不足。
        - 就像 Brian W.Kernighan 说的那样：“别给糟糕的代码加注释——重新写吧。”
    - **不要复述功能**
        - 为了复述代码功能而存在的注释，主要作用是弥补我们表达意图时遭遇的失败，这时要考虑这样的注释是否是必需的。
    - 要解释背后意图
        - 注释要能够解释代码背后的意图，而不是对功能的简单重复。
        ```java
        try {
            // 在这里等待2秒
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            LOGGER.error(e);
        }
        ```
        - 此段注释和没写是一样的，因为只是对 sleep 的简单复述。正确的做法应该是阐述 sleep 背后的原因。如下:
        ```java
        try {
            // 休息2秒，为了等待关联系统处理结果
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            LOGGER.error(e);
        }
        ```
        - 或者直接用一个 private 方法封装起来，用显性的方法名爱表达意图，就不需要注释了.
        ```java
        private void waitProcessResultFromA() {
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e) {
                LOGGER.error(e);
            }
        }
        ```


- 命名工具
    - “他山之石，可以攻玉”。特别是对于英语非母语的我们，命名工具会非常有用。
    - [Codelf-命名工具](https://unbug.github.io/codelf/)


### 3.6.4 本章小结
- 命名在软件设计中有着举足轻重的作用，命名的力量就是**语言的力量**，好的命名可以保证代码不仅是被机器执行的指令，更是人和人之间沟通的`桥梁`。
- 命名的重要性不仅体现在提升代码的可读性上，有意义的命名更能够引导我们更加深入地理解问题域，理清`关键业务概念`，进行合理的业务抽象，从而设计出更加符合业务语义、易于理解的系统。
- 因此，每一个程序员都应该掌握一套`命名的方法论`：了解如何给软件制品（Artifact，包括 Module、Package、Class、Function 和 Variable ）命名，如何写注释，如何让代码自明地表达自己，以及如何保持命名风格的一致性。